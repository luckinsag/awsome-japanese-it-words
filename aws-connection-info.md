# AWS è¿æ¥ä¿¡æ¯ä¸ç½‘ç»œé…ç½®

## ğŸ” AWS CLI é…ç½®

### åŸºæœ¬ä¿¡æ¯
- **AWS CLI ç‰ˆæœ¬**: 2.27.49
- **åŒºåŸŸ**: ap-northeast-1 (äºšå¤ªä¸œåŒ—éƒ¨-ä¸œäº¬)
- **è´¦æˆ·ID**: 628532653086
- **ç”¨æˆ·ARN**: arn:aws:iam::628532653086:root

### é…ç½®æ–‡ä»¶ä½ç½®
- **é…ç½®æ–‡ä»¶**: ~/.aws/config
- **å‡­è¯æ–‡ä»¶**: ~/.aws/credentials

### å½“å‰é…ç½®
```bash
# ~/.aws/config
[default]
region = ap-northeast-1
output = json
```

## ğŸ–¥ï¸ EC2 å®ä¾‹ä¿¡æ¯

### å½“å‰è¿è¡Œå®ä¾‹
| é¡¹ç›® | å€¼ |
|------|-----|
| **å®ä¾‹ID** | i-04319d3d7e427a629 |
| **å®ä¾‹åç§°** | itwords-new |
| **å®ä¾‹ç±»å‹** | t2.micro |
| **çŠ¶æ€** | running |
| **å…¬ç½‘IP** | 57.180.30.179 |
| **ç§ç½‘IP** | 172.31.9.197 |
| **å¯ç”¨åŒº** | ap-northeast-1a |
| **å¯†é’¥å¯¹** | sag- |

### è¿æ¥ä¿¡æ¯
```bash
# SSHè¿æ¥å‘½ä»¤
ssh -i sag-.pem ec2-user@57.180.30.179

# å¯†é’¥æ–‡ä»¶æƒé™
chmod 400 sag-.pem
```

## ğŸŒ ç½‘ç»œé…ç½®

### VPC ä¿¡æ¯
- **VPC ID**: vpc-0353485927017f0ac
- **VPC CIDR**: é»˜è®¤VPC
- **å­ç½‘ID**: subnet-05479790b2dba8576
- **å¯ç”¨åŒº**: ap-northeast-1a

### å®‰å…¨ç»„é…ç½®
- **å®‰å…¨ç»„åç§°**: launch-wizard-1
- **å®‰å…¨ç»„ID**: sg-0da63733e1b03dd37
- **å…¥ç«™è§„åˆ™**:
  - ç«¯å£ 80 (HTTP): 0.0.0.0/0
  - ç«¯å£ 22 (SSH): 0.0.0.0/0
  - ç«¯å£ 443 (HTTPS): 0.0.0.0/0
  - ç«¯å£ 8080 (åº”ç”¨): 0.0.0.0/0 âœ… å·²æ·»åŠ 

### ç½‘ç»œæ¥å£
- **ç½‘ç»œæ¥å£ID**: è‡ªåŠ¨åˆ†é…
- **å…¬ç½‘IPåˆ†é…**: è‡ªåŠ¨åˆ†é…
- **ç§ç½‘IP**: 172.31.9.197

## ğŸ’° æˆæœ¬ä¼˜åŒ–ç­–ç•¥

### é¿å…æ”¶è´¹æ–¹æ¡ˆ
1. **ä¸ä½¿ç”¨å¼¹æ€§IP** - æ–°å®ä¾‹è‡ªåŠ¨åˆ†é…å…¬ç½‘IPï¼Œæ— éœ€é¢å¤–ä»˜è´¹
2. **æŒ‰éœ€ä½¿ç”¨** - ä¸éœ€è¦æ—¶åŠæ—¶ç»ˆæ­¢å®ä¾‹
3. **ä½¿ç”¨t2.micro** - å…è´¹å¥—é¤å®ä¾‹ç±»å‹

### è´¹ç”¨è¯´æ˜
- **t2.microå®ä¾‹**: å…è´¹å¥—é¤å†…å…è´¹
- **å…¬ç½‘IP**: ä½¿ç”¨ä¸­å…è´¹
- **å¼¹æ€§IP**: æœªä½¿ç”¨æ—¶æ”¶è´¹ï¼Œé¿å…ä½¿ç”¨

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### AWS CLI å‘½ä»¤
```bash
# æŸ¥çœ‹å½“å‰ç”¨æˆ·èº«ä»½
aws sts get-caller-identity

# åˆ—å‡ºEC2å®ä¾‹
aws ec2 describe-instances

# æŸ¥çœ‹å®ä¾‹çŠ¶æ€
aws ec2 describe-instances --instance-ids i-04319d3d7e427a629

# ç»ˆæ­¢å®ä¾‹
aws ec2 terminate-instances --instance-ids i-04319d3d7e427a629

# åˆ›å»ºæ–°å®ä¾‹ï¼ˆè‡ªåŠ¨åˆ†é…å…¬ç½‘IPï¼‰
aws ec2 run-instances \
  --image-id ami-0f95ad36d6d54ceba \
  --count 1 \
  --instance-type t2.micro \
  --key-name sag- \
  --security-group-ids [å®‰å…¨ç»„ID] \
  --subnet-id subnet-05479790b2dba8576 \
  --associate-public-ip-address \
  --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=itwords-new}]'
```

### SSH è¿æ¥å‘½ä»¤
```bash
# è®¾ç½®å¯†é’¥æƒé™
chmod 400 sag-.pem

# è¿æ¥åˆ°å®ä¾‹
ssh -i sag-.pem ec2-user@57.180.30.179

# ä½¿ç”¨SSHé…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
# åœ¨ ~/.ssh/config ä¸­æ·»åŠ ï¼š
Host itwords-ec2
    HostName 57.180.30.179
    User ec2-user
    IdentityFile ~/path/to/sag-.pem
    Port 22
```

## ğŸ“ å¯†é’¥æ–‡ä»¶ç®¡ç†

### å¯†é’¥æ–‡ä»¶ä½ç½®
- **å¯†é’¥æ–‡ä»¶**: ./sag-.pem
- **æƒé™è®¾ç½®**: 400 (ä»…æ‰€æœ‰è€…å¯è¯»)
- **å¯†é’¥å¯¹åç§°**: sag-

### å®‰å…¨æ³¨æ„äº‹é¡¹
- å¯†é’¥æ–‡ä»¶æƒé™å¿…é¡»è®¾ç½®ä¸º400
- ä¸è¦å°†å¯†é’¥æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- å®šæœŸè½®æ¢å¯†é’¥å¯¹
- å¤‡ä»½å¯†é’¥æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®

## ğŸš€ éƒ¨ç½²ä¿¡æ¯

### åº”ç”¨è®¿é—®åœ°å€
- **å‰ç«¯åº”ç”¨**: http://57.180.30.179
- **åç«¯API**: http://57.180.30.179:8080
- **æ•°æ®åº“**: 57.180.30.179:3306

### éƒ¨ç½²è„šæœ¬
é¡¹ç›®åŒ…å«ä»¥ä¸‹éƒ¨ç½²è„šæœ¬ï¼š
- `deploy-on-ec2.sh` - EC2å®ä¾‹éƒ¨ç½²è„šæœ¬
- `docker-compose.yml` - Dockerå®¹å™¨ç¼–æ’
- `scripts/deployment/` - éƒ¨ç½²ç›¸å…³è„šæœ¬

## ğŸ“ æ³¨æ„äº‹é¡¹

### ç¯å¢ƒå˜é‡é—®é¢˜
å½“å‰shellç¯å¢ƒä¸­çš„PAGERå˜é‡è®¾ç½®å¯èƒ½å¯¼è‡´è¾“å‡ºé‡å®šå‘ï¼š
```bash
# ä¸´æ—¶è§£å†³
unset PAGER

# æ°¸ä¹…è§£å†³ï¼šç¼–è¾‘ ~/.zshrc ç§»é™¤PAGERè®¾ç½®
```

### å®ä¾‹ç®¡ç†
- å®šæœŸæ£€æŸ¥å®ä¾‹çŠ¶æ€
- ä¸éœ€è¦æ—¶åŠæ—¶ç»ˆæ­¢å®ä¾‹
- ç›‘æ§è´¹ç”¨ä½¿ç”¨æƒ…å†µ
- å¤‡ä»½é‡è¦æ•°æ®

## ğŸ”„ æ›´æ–°è®°å½•

| æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|----------|
| 2024-12-19 | åˆ›å»ºæ–°EC2å®ä¾‹ï¼Œåˆ†é…å…¬ç½‘IP |
| 2024-12-19 | æˆåŠŸè¿æ¥EC2å®ä¾‹ |
| 2024-12-19 | é…ç½®AWS CLIè¿æ¥ |
| 2024-12-19 | æ·»åŠ 8080ç«¯å£åˆ°å®‰å…¨ç»„ï¼Œä¿®å¤åç«¯APIå¤–éƒ¨è®¿é—® |

---

**æœ€åæ›´æ–°**: 2024-12-19  
**ç»´æŠ¤è€…**: ITWORDSé¡¹ç›®ç»„ 